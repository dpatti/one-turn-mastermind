<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>One Turn Mastermind</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f0f0f0;
        }
        .game-container {
            background: white;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .game-title {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
        }
        .game-board {
            margin-bottom: 30px;
        }
        .guess-row {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            padding: 10px;
            background: #f8f8f8;
            border-radius: 5px;
        }
        .guess-pegs {
            display: flex;
            gap: 8px;
            margin-right: 20px;
        }
        .peg {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 2px solid #333;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
            text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.5);
        }
        .feedback-pegs {
            display: flex;
            gap: 5px;
        }
        .feedback-peg {
            width: 15px;
            height: 15px;
            border-radius: 50%;
            border: 1px solid #666;
        }
        .player-input {
            display: flex;
            gap: 10px;
            align-items: center;
            margin-bottom: 20px;
        }
        .color-selector {
            padding: 8px;
            border: 2px solid #333;
            border-radius: 5px;
            background: white;
            cursor: pointer;
            font-size: 16px;
            min-width: 60px;
            text-align: center;
        }
        #game-controls {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        #share-button {
            margin-left: auto;
        }
        .submit-button {
            padding: 15px 30px;
            background: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }
        .submit-button:hover {
            background: #45a049;
        }
        .submit-button:disabled {
            background: #cccccc;
            color: #666666;
            cursor: not-allowed;
        }
        .new-game-button {
            padding: 15px 30px;
            background: #2196F3;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }
        .new-game-button:hover {
            background: #1976D2;
        }
        .share-button {
            padding: 15px 30px;
            background: #FF9800;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin-right: 10px;
        }
        .share-button:hover {
            background: #F57C00;
        }
        .result {
            text-align: center;
            margin-top: 20px;
            font-size: 18px;
            font-weight: bold;
        }
        .result.correct {
            color: #4CAF50;
        }
        .result.incorrect {
            color: #f44336;
        }

        /* Mobile optimizations for advanced mode */
        @media (max-width: 768px) {
            .game-container {
                padding: 15px;
            }
            body {
                padding: 10px;
            }
            .player-input-advanced {
                gap: 4px !important;
            }
            .slot-container {
                padding: 4px !important;
            }
            .player-input {
                gap: 6px !important;
            }
            .color-selector {
                padding: 6px !important;
                font-size: 14px !important;
                min-width: 50px !important;
            }
        }

        a {
          color: #666;
          text-decoration: none;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h1 class="game-title">One Turn Mastermind</h1>
        <div id="game-board" class="game-board"></div>
        <div id="player-input" class="player-input"></div>
        <div id="game-controls">
            <button id="submit-button" class="submit-button">Submit</button>
            <button id="share-button" class="share-button">Share Link</button>
            <button id="new-game-button" class="new-game-button">New Game</button>
        </div>
        <div id="result" class="result"></div>
        <div style="text-align: center; margin-top: 20px; font-size: 14px; color: #666; line-height: 1.4;">
            <div style="margin-bottom: 10px;">
                <a href="#" id="rules-toggle">
                    How to play
                </a>
                <span style="margin: 0 10px;">â€¢</span>
                <a href="https://github.com/dpatti/one-turn-mastermind" target="_blank" >
                    View on GitHub
                </a>
            </div>
            <div id="rules-content" style="display: none; background: #f8f8f8; padding: 15px; border-radius: 8px; margin-top: 10px; text-align: left; max-width: 600px; margin-left: auto; margin-right: auto;">
                <p><b>How to play Mastermind</b></p>
                <p>
                    See the <a href="https://en.wikipedia.org/wiki/Mastermind_(board_game)" target="_blank" style="text-decoration: underline">Wikpedia page</a>
                    for a more complete description of the rules. In brief, your goal is to guess a secret code made up
                    of a series of colors which can have repeats. Each guess is given feedback in the form of:
                </p>
                <ul style="margin: 10px 0; padding-left: 20px;">
                    <li>A <b>black peg</b> indicating one color is in the correct position</li>
                    <li>A <b>white peg</b> indicating one color is part of the code but in the wrong position</li>
                </ul>
                <p>
                    If you're familiar with Wordle, it plays out in a similar style, but unlike Wordle, the player is
                    not told <i>which</i> slot each black/white peg corresponds to.
                </p>
                <p>
                    In this variation on the game, you start with a few rounds of optimal guesses, and you must figure
                    out the secret code in one turn. There is always enough information given that the code can be
                    determined logically, no guessing is required. See the README on GitHub for some more information
                    and hints.
                </p>
            </div>
        </div>
    </div>
    <script type="module" src="/src/main.ts"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const toggle = document.getElementById('rules-toggle');
            const content = document.getElementById('rules-content');

            toggle.addEventListener('click', (e) => {
                e.preventDefault();
                if (content.style.display === 'none') {
                    content.style.display = 'block';
                    toggle.textContent = 'Hide rules';
                } else {
                    content.style.display = 'none';
                    toggle.textContent = 'How to play';
                }
            });
        });
    </script>
</body>
</html>
